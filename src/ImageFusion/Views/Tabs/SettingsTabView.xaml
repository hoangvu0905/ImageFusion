<?xml version="1.0" encoding="utf-8" ?>
<ContentView xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:viewmodels="clr-namespace:ImageFusion.ViewModels"
             xmlns:converters="clr-namespace:ImageFusion.Converters"
             x:Class="ImageFusion.Views.Tabs.SettingsTabView"
             x:DataType="viewmodels:MainViewModel">

    <ContentView.Resources>
        <converters:BoolToVisibilityConverter x:Key="BoolToVisibilityConverter" />
    </ContentView.Resources>

    <ScrollView>
        <VerticalStackLayout Padding="16" Spacing="16">
            <!-- Output Settings Section -->
            <Border StrokeShape="RoundRectangle 12"
                   Stroke="{StaticResource Gray200}"
                   Padding="16"
                   BackgroundColor="{StaticResource White}">
                <VerticalStackLayout Spacing="12">
                    <Label Text="ðŸ“ Output Settings" FontSize="18" FontAttributes="Bold" TextColor="{StaticResource Primary}" />
                    
                    <Grid ColumnDefinitions="*,*" ColumnSpacing="16">
                        <VerticalStackLayout Grid.Column="0">
                            <Label Text="Width" FontSize="12" TextColor="{StaticResource Gray500}" />
                            <Entry Text="{Binding OutputWidth}" Keyboard="Numeric" />
                        </VerticalStackLayout>
                        <VerticalStackLayout Grid.Column="1">
                            <Label Text="Height" FontSize="12" TextColor="{StaticResource Gray500}" />
                            <Entry Text="{Binding OutputHeight}" Keyboard="Numeric" />
                        </VerticalStackLayout>
                    </Grid>
                    
                    <VerticalStackLayout>
                        <Label Text="Images per Output" FontSize="12" TextColor="{StaticResource Gray500}" />
                        <Grid ColumnDefinitions="*,Auto" ColumnSpacing="8">
                            <Slider Grid.Column="0" 
                                   Minimum="1" 
                                   Maximum="10" 
                                   Value="{Binding ImagesPerOutput}" />
                            <Label Grid.Column="1" 
                                  Text="{Binding ImagesPerOutput}" 
                                  FontSize="16"
                                  FontAttributes="Bold"
                                  WidthRequest="30" />
                        </Grid>
                    </VerticalStackLayout>
                </VerticalStackLayout>
            </Border>
            
            <!-- Border Settings Section -->
            <Border StrokeShape="RoundRectangle 12"
                   Stroke="{StaticResource Gray200}"
                   Padding="16"
                   BackgroundColor="{StaticResource White}">
                <VerticalStackLayout Spacing="12">
                    <Label Text="ðŸ–¼ï¸ Border Settings" FontSize="18" FontAttributes="Bold" TextColor="{StaticResource Primary}" />
                    
                    <Grid ColumnDefinitions="*,*" ColumnSpacing="16">
                        <VerticalStackLayout Grid.Column="0">
                            <Label Text="Border Pixel" FontSize="12" TextColor="{StaticResource Gray500}" />
                            <Entry Text="{Binding BorderPixel}" Keyboard="Numeric" />
                        </VerticalStackLayout>
                        <VerticalStackLayout Grid.Column="1">
                            <Label Text="Border Color (Hex)" FontSize="12" TextColor="{StaticResource Gray500}" />
                            <Entry Text="{Binding BorderColorHex}" Placeholder="#FFFFFF" />
                        </VerticalStackLayout>
                    </Grid>
                </VerticalStackLayout>
            </Border>
            
            <!-- Split Settings Section -->
            <Border StrokeShape="RoundRectangle 12"
                   Stroke="{StaticResource Gray200}"
                   Padding="16"
                   BackgroundColor="{StaticResource White}">
                <VerticalStackLayout Spacing="12">
                    <Label Text="âž— Split Settings" FontSize="18" FontAttributes="Bold" TextColor="{StaticResource Primary}" />
                    
                    <Grid ColumnDefinitions="*,*" ColumnSpacing="16">
                        <VerticalStackLayout Grid.Column="0">
                            <Label Text="Split Pixel" FontSize="12" TextColor="{StaticResource Gray500}" />
                            <Entry Text="{Binding SplitPixel}" Keyboard="Numeric" />
                        </VerticalStackLayout>
                        <VerticalStackLayout Grid.Column="1">
                            <Label Text="Split Color (Hex)" FontSize="12" TextColor="{StaticResource Gray500}" />
                            <Entry Text="{Binding SplitColorHex}" Placeholder="#FFFFFF" />
                        </VerticalStackLayout>
                    </Grid>
                </VerticalStackLayout>
            </Border>
            
            <!-- Layout Settings Section -->
            <Border StrokeShape="RoundRectangle 12"
                   Stroke="{StaticResource Gray200}"
                   Padding="16"
                   BackgroundColor="{StaticResource White}">
                <VerticalStackLayout Spacing="12">
                    <Label Text="ðŸ“Š Merge Layout" FontSize="18" FontAttributes="Bold" TextColor="{StaticResource Primary}" />
                    
                    <Label Text="(Available when 3+ images)" 
                           FontSize="12" 
                           TextColor="{StaticResource Gray400}"
                           IsVisible="{Binding ShowLayoutOptions, Converter={StaticResource BoolToVisibilityConverter}, ConverterParameter=invert}" />
                    
                    <Picker Title="Select Layout"
                           ItemsSource="{Binding AvailableLayouts}"
                           SelectedItem="{Binding MergeLayout}"
                           IsEnabled="{Binding ShowLayoutOptions}" />
                </VerticalStackLayout>
            </Border>
            
            <!-- Format Settings Section -->
            <Border StrokeShape="RoundRectangle 12"
                   Stroke="{StaticResource Gray200}"
                   Padding="16"
                   BackgroundColor="{StaticResource White}">
                <VerticalStackLayout Spacing="12">
                    <Label Text="ðŸ“ Image Format" FontSize="18" FontAttributes="Bold" TextColor="{StaticResource Primary}" />
                    
                    <Picker Title="Select Format"
                           ItemsSource="{Binding AvailableFormats}"
                           SelectedItem="{Binding ImageFormat}" />
                </VerticalStackLayout>
            </Border>
        </VerticalStackLayout>
    </ScrollView>
</ContentView>
